<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Chitrakaar-Draw &amp; Guess, Desi Style</title>
  <meta name="description"
    content="Free multiplayer Indian draw-and-guess game. Create a room, invite friends, and play with 400+ desi words!" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <h1 class="loading-logo">Chitrakaar</h1>
      <div class="loading-spinner">
        <div class="spinner-ring"></div>
      </div>
      <p class="loading-status" id="loading-status">Connecting to server</p>
      <div class="loading-dots">
        <span></span><span></span><span></span>
      </div>
      <p class="loading-sub">This may take a moment on first load</p>
    </div>
  </div>


  <div id="lobby-screen" class="screen">
    <div class="lobby-container">
      <div class="logo-section">
        <h1 class="logo">Chitrakaar</h1>
        <p class="tagline">Draw &amp; Guess, Desi Style!</p>
      </div>

      <div class="lobby-form">
        <input type="text" id="player-name" placeholder="Your name..." maxlength="20" autocomplete="off" />

        <!-- Avatar Picker -->
        <div class="avatar-picker">
          <p class="picker-label">Pick your avatar</p>
          <div class="avatar-grid" id="avatar-grid">
            <button class="avatar-option selected" data-avatar="0" style="background:#ff6b2b" title="Turban">Tu</button>
            <button class="avatar-option" data-avatar="1" style="background:#e74c3c" title="Saree">Sa</button>
            <button class="avatar-option" data-avatar="2" style="background:#3498db" title="Kurta">Ku</button>
            <button class="avatar-option" data-avatar="3" style="background:#9b59b6" title="Sherwani">Sh</button>
            <button class="avatar-option" data-avatar="4" style="background:#f39c12" title="Dhoti">Dh</button>
            <button class="avatar-option" data-avatar="5" style="background:#e91e63" title="Lehenga">Le</button>
            <button class="avatar-option" data-avatar="6" style="background:#00c97b" title="Pagdi">Pa</button>
            <button class="avatar-option" data-avatar="7" style="background:#1abc9c" title="Dupatta">Du</button>
            <button class="avatar-option" data-avatar="8" style="background:#2ecc71" title="Cap">Ca</button>
            <button class="avatar-option" data-avatar="9" style="background:#ff4f9a" title="Bindi">Bi</button>
            <button class="avatar-option" data-avatar="10" style="background:#f1c40f" title="Lungi">Lu</button>
            <button class="avatar-option" data-avatar="11" style="background:#95a5a6" title="Topi">To</button>
          </div>
        </div>

        <div class="lobby-actions">
          <!-- Game Mode Selector -->
          <div class="mode-selector">
            <label for="game-mode" class="picker-label">Game Mode</label>
            <select id="game-mode">
              <option value="classic">Classic (All Words)</option>
              <option value="bollywood">Bollywood</option>
              <option value="cricket">Cricket</option>
              <option value="food">Food</option>
              <option value="festivals">Festivals</option>
              <option value="travel">Travel & Places</option>
              <option value="culture">Culture & Daily Life</option>
              <option value="history">History</option>
              <option value="nature">Nature & Animals</option>
              <option value="memes">Memes & Fun</option>
              <option value="hard">Hard Mode (60s)</option>
              <option value="speed">Speed (30s Turns)</option>
            </select>
          </div>

          <button id="create-room-btn" class="btn btn-primary btn-large">
            Create Room
          </button>

          <button id="quick-play-btn" class="btn btn-accent">
            Quick Play
          </button>

          <div class="join-section">
            <input type="text" id="room-code-input" placeholder="Room code" maxlength="6" autocomplete="off"
              style="text-transform:uppercase; letter-spacing:3px; font-weight:700; text-align:center;" />
            <button id="join-room-btn" class="btn btn-primary">
              Join
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div id="waiting-screen" class="screen">
    <div class="waiting-container">
      <div class="waiting-header">
        <h2>Chitrakaar</h2>
        <div class="room-code-display">
          <span class="label">Room Code</span>
          <span id="display-room-code" class="code">------</span>
          <button id="copy-code-btn" class="btn-icon-only" title="Copy code">Copy</button>
        </div>
        <div class="room-meta">
          <span id="display-mode" class="mode-badge">Classic</span>
          <span id="display-public" class="public-badge hidden">Public</span>
        </div>
      </div>

      <div id="player-list" class="player-list"></div>

      <div class="waiting-actions">
        <button id="start-game-btn" class="btn btn-primary btn-large">
          Start Game
        </button>
        <button id="share-whatsapp-btn" class="btn btn-whatsapp">
          Share on WhatsApp
        </button>
      </div>
      <p id="waiting-hint" class="hint">Need at least 2 players to start</p>
      <p id="auto-start-hint" class="hint hidden">Game auto-starts when 4 players join...</p>
    </div>
  </div>


  <div id="game-screen" class="screen">
    <div class="game-layout">

      <div id="players-panel" class="game-panel players-panel">
        <div class="panel-header">
          <h3>Players</h3>
          <button id="close-players-btn" class="mobile-close-btn">X</button>
        </div>
        <div id="game-player-list" class="game-player-list"></div>
      </div>

      <div class="canvas-area">
        <div class="game-top-bar">
          <div class="round-info">
            <span id="round-text">Round 1/3</span>
            <span id="mode-label" class="mode-badge small">Classic</span>
          </div>
          <div id="word-hint" class="word-hint">Waiting...</div>
          <div class="timer-container">
            <svg class="timer-ring" viewBox="0 0 36 36">
              <path class="timer-bg"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
              <path id="timer-path" class="timer-path"
                d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
            </svg>
            <span id="timer-text" class="timer-text">80</span>
          </div>
        </div>

        <div id="turn-overlay" class="overlay hidden">
          <div class="overlay-content">
            <h3 id="turn-info">Waiting for drawer...</h3>
            <div id="word-choices" class="word-choices hidden"></div>
          </div>
        </div>

        <div id="gameover-overlay" class="overlay hidden">
          <div class="overlay-content gameover-content">
            <h2>Game Over!</h2>
            <div id="final-scores" class="final-scores"></div>
            <p class="gameover-hint">New game starts in 10 seconds...</p>
          </div>
        </div>

        <canvas id="draw-canvas"></canvas>

        <div id="tools-bar" class="tools-bar hidden">
          <div class="color-palette" id="color-palette">
            <button class="color-btn selected" data-color="#1a1a2e" style="background:#1a1a2e" title="Black"></button>
            <button class="color-btn" data-color="#ffffff" style="background:#ffffff; border:1px solid #333"
              title="White"></button>
            <button class="color-btn" data-color="#e74c3c" style="background:#e74c3c" title="Red"></button>
            <button class="color-btn" data-color="#e67e22" style="background:#e67e22" title="Orange"></button>
            <button class="color-btn" data-color="#f1c40f" style="background:#f1c40f" title="Yellow"></button>
            <button class="color-btn" data-color="#2ecc71" style="background:#2ecc71" title="Green"></button>
            <button class="color-btn" data-color="#3498db" style="background:#3498db" title="Blue"></button>
            <button class="color-btn" data-color="#9b59b6" style="background:#9b59b6" title="Purple"></button>
            <button class="color-btn" data-color="#e91e63" style="background:#e91e63" title="Pink"></button>
            <button class="color-btn" data-color="#795548" style="background:#795548" title="Brown"></button>
            <button class="color-btn" data-color="#607d8b" style="background:#607d8b" title="Gray"></button>
            <button class="color-btn" data-color="#00bcd4" style="background:#00bcd4" title="Cyan"></button>
          </div>
          <div class="brush-sizes">
            <button class="brush-btn selected" data-size="4"><span style="width:6px;height:6px"></span></button>
            <button class="brush-btn" data-size="8"><span style="width:10px;height:10px"></span></button>
            <button class="brush-btn" data-size="14"><span style="width:16px;height:16px"></span></button>
            <button class="brush-btn" data-size="28"><span style="width:24px;height:24px"></span></button>
          </div>
          <div class="tool-divider"></div>
          <button id="eraser-btn" class="tool-btn" title="Eraser">Erase</button>
          <button id="fill-btn" class="tool-btn" title="Fill">Fill</button>
          <button id="undo-btn" class="tool-btn" title="Undo">Undo</button>
          <button id="clear-btn" class="tool-btn" title="Clear All">Clear</button>
          <div class="tool-divider"></div>
          <button id="save-btn" class="tool-btn tool-btn-save" title="Download drawing">Save</button>
        </div>
      </div>

      <div id="chat-panel" class="game-panel chat-panel">
        <div class="panel-header">
          <h3>Chat</h3>
          <button id="close-chat-btn" class="mobile-close-btn">X</button>
        </div>
        <div class="quick-chat" id="quick-chat">
          <button class="quick-chat-btn" data-msg="Arre wah!">Arre wah!</button>
          <button class="quick-chat-btn" data-msg="Kya baat!">Kya baat!</button>
          <button class="quick-chat-btn" data-msg="GG">GG</button>
          <button class="quick-chat-btn" data-msg="Nice">Nice</button>
          <button class="quick-chat-btn" data-msg="LOL">LOL</button>
          <button class="quick-chat-btn" data-msg="Bas yaar">Bas yaar</button>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input-area">
          <input type="text" id="chat-input" placeholder="Type your guess..." maxlength="200" autocomplete="off" />
          <button id="send-btn" class="btn btn-primary btn-small">Send</button>
        </div>
      </div>

    </div>

    <div class="mobile-toggles">
      <button id="toggle-players-btn" class="mobile-toggle-btn">Players</button>
      <button id="toggle-chat-btn" class="mobile-toggle-btn">Chat</button>
    </div>
  </div>

  <div id="toast-container" class="toast-container"></div>
  <div id="confetti-container" class="confetti-container"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>

</html>